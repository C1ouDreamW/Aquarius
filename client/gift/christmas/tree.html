<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åœ£è¯èŠ‚å¿«ä¹ï¼ï¼ï¼</title>
  <link rel="stylesheet" href="./style.css">
  <script type="importmap">
        { "imports": { "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js", "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/", "@mediapipe/tasks-vision": "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/+esm" } }
    </script>
  <script defer src="https://tongji.heycloudream.cn/script.js"
    data-website-id="d402a8f2-4c31-4c1f-9448-fbdb71694a3c"></script>
</head>

<body>
  <div id="loader">
    <div class="spinner"></div>
    <div class="loader-text">ç³»ç»Ÿæ­£åœ¨åˆå§‹åŒ–...</div>
  </div>
  <div id="canvas-container"></div>
  <div id="title-container">
    <h1 id="display-line1" class="title-line">Merry</h1>
    <h1 id="display-line2" class="title-line">Christmas</h1>
  </div>
  <div id="ui-layer">
    <div id="top-right-controls"><button class="elegant-btn glass-panel" id="fs-btn" onclick="toggleFullScreen()"
        style="padding: 6px 12px;">â›¶ å…¨å±æ˜¾ç¤º</button><button class="elegant-btn glass-panel" id="toggle-ui-btn"
        onclick="toggleUI()" style="padding: 6px 12px;">ğŸ‘ éšè—ç•Œé¢</button></div>
    <div id="left-sidebar" class="panel-hidden">
      <div class="top-left-panel glass-panel">
        <div class="ui-title-main">åœºæ™¯å®šåˆ¶</div>
        <div class="ui-title-sub">ç¥ç¦è¯­å½•</div>
        <div class="control-row"><input type="text" id="input-line1" class="input-glass" placeholder="ç¬¬ä¸€è¡Œæ–‡å­—"
            oninput="updateTextConfig()"><input type="text" id="input-line2" class="input-glass" placeholder="ç¬¬äºŒè¡Œæ–‡å­—"
            oninput="updateTextConfig()" style="margin-top:2px;"></div>
        <div class="ui-title-sub">å­—ä½“é£æ ¼</div>
        <select id="font-select" class="input-glass" onchange="updateTextConfig()">
          <option value="style1">ä¹¦æ³•éŸµå‘³</option>
          <option value="style2">å¤å…¸è¡¬çº¿</option>
          <option value="style3">ä¼˜é›…æ‰‹å†™</option>
          <option value="style4">è‰ºæœ¯çº¿æ¡</option>
          <option value="style5">å¤å¤é‡ç£…</option>
        </select>
        <div class="control-row">
          <div class="ui-title-sub" style="margin-top:6px;">å¤§å° & é¢œè‰²</div>
          <div style="display:flex; gap:8px; align-items:center;"><input type="range" min="50" max="250" value="100"
              id="slider-fontsize" oninput="updateTextConfig()"><input type="color" id="color-picker" value="#fceea7"
              oninput="updateTextConfig()" style="width:30px; height:20px; border:none;"></div>
        </div>
        <div class="ui-title-sub" style="border-top:1px solid rgba(255,255,255,0.05); padding-top:6px; margin-top:6px;">
          èƒŒæ™¯éŸ³ä¹</div>
        <div style="display:flex; gap:8px; margin-bottom:4px;"><button class="elegant-btn" onclick="toggleMusicPlay()"
            id="play-btn" style="flex:2; font-size:14px;">â¯</button><button class="elegant-btn" onclick="replayMusic()"
            style="flex:1; font-size:14px;">âŸ²</button></div>
        <div class="control-row"><span class="control-label" style="text-align:center;">éŸ³é‡è°ƒèŠ‚</span><input type="range"
            min="0" max="100" value="50" id="slider-volume" oninput="updateVolume(this.value)"></div>
        <div class="ui-title-sub" style="border-top:1px solid rgba(255,255,255,0.05); padding-top:6px; margin-top:6px;">
          ç²’å­æ§åˆ¶</div>
        <div class="particle-scroll-container">
          <div class="control-row"><span class="control-label">è£…é¥°å¯†åº¦ (æ ‘)</span><input type="range" min="500" max="3000"
              value="1500" id="slider-tree"></div>
          <div class="control-row"><span class="control-label">æ˜Ÿå°˜å¯†åº¦ (èƒŒæ™¯)</span><input type="range" min="500" max="5000"
              value="2500" id="slider-dust"></div>
          <div class="control-row"><span class="control-label">é›ªèŠ±æ•°é‡</span><input type="range" min="0" max="3000"
              step="100" value="1500" id="slider-snow-count" onchange="updateSnowSettings()"></div>
          <div class="control-row"><span class="control-label">é›ªèŠ±å¤§å°</span><input type="range" min="0.05" max="0.3"
              step="0.01" value="0.12" id="slider-snow-size" onchange="updateSnowSettings()"></div>
          <div class="control-row"><span class="control-label">ä¸‹è½é€Ÿåº¦</span><input type="range" min="1.0" max="8.0"
              step="0.5" value="3.5" id="slider-snow-speed" oninput="updateSnowSpeed(this.value)"></div>
        </div>
        <button class="elegant-btn" style="width:100%; margin-top:8px;" onclick="applyParticleSettings()">âš¡
          é‡ç½®åœºæ™¯</button>
      </div>
      <div class="top-left-panel glass-panel">
        <div class="ui-title-main">äº¤äº’ä¸­æ§</div>
        <div class="ui-title-sub">å½¢æ€åˆ‡æ¢</div>
        <div class="interaction-grid"><button class="elegant-btn" style="flex:1;" onclick="setMode('TREE')">èšåˆ
            (Space)</button><button class="elegant-btn" style="flex:1;" onclick="setMode('SCATTER')">æ•£å¼€ (Z)</button>
        </div>
        <button class="elegant-btn" style="width:100%;" onclick="triggerPhotoGrab()">æŠ“å–ç…§ç‰‡ (X)</button>
        <div class="control-row" style="margin-top:8px;"><span class="control-label">æ—‹è½¬é€Ÿåº¦ (æ•£å¼€)</span><input type="range"
            min="0.1" max="5.0" step="0.1" value="1.4" oninput="updateRotationSpeed(this.value)"></div>
        <div class="direction-pad">
          <div></div>
          <div class="dir-btn" onmousedown="startRotate('up')" onmouseup="stopRotate()" onmouseleave="stopRotate()">â–²
          </div>
          <div></div>
          <div class="dir-btn" onmousedown="startRotate('left')" onmouseup="stopRotate()" onmouseleave="stopRotate()">â—€
          </div>
          <div class="dir-btn" onclick="resetRotation()" style="font-size:10px;">â—</div>
          <div class="dir-btn" onmousedown="startRotate('right')" onmouseup="stopRotate()" onmouseleave="stopRotate()">â–¶
          </div>
          <div></div>
          <div class="dir-btn" onmousedown="startRotate('down')" onmouseup="stopRotate()" onmouseleave="stopRotate()">â–¼
          </div>
          <div></div>
        </div>
      </div>
    </div>
    <div class="bottom-left-panel glass-panel panel-hidden">
      <div class="ui-title-main" style="font-size:12px; margin-bottom:5px;">èµ„æºç®¡ç†</div>
      <label class="elegant-btn"> + ä¸Šä¼ ç…§ç‰‡ <input type="file" id="file-input" multiple accept="image/*"> </label>
      <button class="elegant-btn" onclick="openDeleteManager()">â–£ ç®¡ç†ç…§ç‰‡</button>
      <label class="elegant-btn" id="music-upload-label"> â™« èƒŒæ™¯éŸ³ä¹ <input type="file" id="music-input"
          accept=".mp3,audio/mpeg"> </label>
      <button class="elegant-btn" id="toggle-cam-btn" onclick="toggleCameraDisplay()">ğŸ“· éšè—ç”»é¢</button>
    </div>
  </div>
  <div id="gesture-hint">æ­£åœ¨åˆå§‹åŒ–ç³»ç»Ÿ...</div>
  <div id="webcam-wrapper"><canvas id="webcam-canvas" width="320" height="240"></canvas>
    <div id="cam-status"></div>
  </div>
  <video id="webcam-video" autoplay playsinline muted style="display:none"></video>
  <div id="delete-manager" class="hidden">
    <div class="manager-title">ç…§ç‰‡åº“ç®¡ç†</div>
    <div id="photo-grid"></div>
    <div class="manager-actions"><button class="elegant-btn btn-red glass-panel" onclick="clearAllPhotos()"
        style="padding: 8px 20px;">æ¸…ç©ºæ‰€æœ‰</button><button class="elegant-btn glass-panel" onclick="closeDeleteManager()"
        style="padding: 8px 20px;">å…³é—­</button></div>
  </div>

  <script type="module" src="./script.js"></script>
</body>

</html>